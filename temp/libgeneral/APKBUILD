maintainer="Aster Boese <asterboese@mailbox.org>"
pkgname=libgeneral
pkgver=84
_commit="03e33a356abd0ced4bfce8df9e9644edeaf2920c"
pkgrel=0
pkgdesc="A collection of macros to aid in maintaining a consistent coding style for C++"
url="https://github.com/tihmstar/libgeneral"
arch="all"
license="LGPL-2.1-or-later"
makedepends="
	autoconf
	automake
	libtool
	m4
"
subpackages="$pkgname-dev"
source="$pkgname-$pkgver.tar.gz::$url/archive/refs/tags/$pkgver.tar.gz"
# No tests
options="!check"

prepare() {
	default_prepare

	sed -i -e \
		"s/git rev-list --count HEAD | tr -d \\'\\\n\\'/printf $pkgver/g" \
		$builddir/configure.ac
}

build() {
	libtoolize
	aclocal
	autoconf
	autoheader
	automake --add-missing
	autoreconf -i
	./configure \
		--build=$CBUILD \
		--host=$CBUILD \
		--target=$CTARGET \
		--prefix=/usr
	make
}

package() {
	make DESTDIR="$pkgdir" install
}

sha512sums="
eca67fcac6b7f72a51e78cf250810b965b91426fcb4853f2f7037898d14a5cc35de523728a94e3bacb82306dbdf4a2f1423135c941e4c53f148353d6d7dd3435  libgeneral-84.tar.gz
"
